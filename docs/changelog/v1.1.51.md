# v1.1.51：Bedrock 跨区域修复、OSC52 剪贴板恢复

**发布日期**：2026年02月04日

---

## 一句话总结

这次是一个小版本修复，主要解决了 Bedrock 跨区域推理模型的前缀重复问题，恢复了 TUI 的 OSC52 剪贴板支持，并修复了 headers 双重合并的 bug。

---

## 问题修复：Bedrock 跨区域推理模型前缀重复

### 之前的问题

使用 AWS Bedrock 的跨区域推理模型时，模型名称会被错误地添加两次前缀，导致 API 调用失败。

### 现在的情况

修复了前缀重复问题，跨区域推理模型现在可以正常使用。

---

## 问题修复：Provider Headers 双重合并

### 之前的问题

如果一个 provider 在多个地方配置了认证信息，headers 会被重复合并，可能导致请求异常。

### 现在的情况

回退了导致 headers 双重合并的变更，认证信息现在正确处理。

---

## 改进：TUI 恢复 OSC52 剪贴板

### 这次更新了什么？

恢复了 TUI 对 OSC52 剪贴板协议的直接支持。

### 有什么用？

OSC52 是一种终端剪贴板协议，允许在远程 SSH 会话中也能正常复制内容到本地剪贴板。如果你经常通过 SSH 使用 OpenCode，这个功能非常实用。

---

## 改进：AGENTS.md 配置目录优先级

### 这次更新了什么？

现在 `OPENCODE_CONFIG_DIR` 环境变量指定的目录会被优先用于查找 AGENTS.md 文件。

### 有什么用？

如果你通过环境变量自定义了配置目录，AGENTS.md 会优先从该目录读取，而不是默认位置。

---

## 改进：内置 Agent 文档

### 这次更新了什么？

新增了内置 Agent 的官方文档，帮助用户了解 OpenCode 自带的 Agent 功能。

---

## 要不要升级？

| 情况 | 建议 |
|------|------|
| 使用 AWS Bedrock 跨区域推理 | ✅ 强烈推荐 |
| 通过 SSH 使用 OpenCode | ✅ 推荐升级 |
| 用得好好的 | 可以等下次 |

**升级命令**：

```bash
opencode upgrade
```

---

## 技术细节（可跳过）

<details>
<summary>点击展开完整更新列表</summary>

### Core
- Revert change that caused headers to be double merged if provider was authenticated in multiple places
- Document the built-in agents
- Prevent double-prefixing of Bedrock cross-region inference models (@sergical)
- Prioritize OPENCODE_CONFIG_DIR for AGENTS.md (@lgladysz)

### TUI
- Restore direct OSC52 support

### Desktop
- Tighten up session padding-top for mobile (@DNGriffin)

</details>

---

[← 返回更新日志](./index.md)
