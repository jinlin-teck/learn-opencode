# v1.1.53：用户插件优先级、ACP 会话用量追踪

**发布日期**：2026年02月05日

---

## 一句话总结

这次更新让用户插件可以覆盖内置插件，新增 ACP 会话用量追踪，修复了中止消息时的未处理错误，桌面端改进了文件操作和终端稳定性。

---

## 新功能：用户插件覆盖内置插件

### 这次更新了什么？

当用户插件和内置插件提供相同 provider 时，用户插件现在会优先生效。

### 有什么用？

如果你对内置插件的行为不满意，可以编写自己的插件来替代它。比如你想自定义某个 provider 的认证方式，只需创建一个同名的用户插件即可。

### 如何使用？

在 `.opencode/plugins/` 或 `~/.config/opencode/plugins/` 中创建与内置插件同名的插件文件，OpenCode 会自动使用你的版本。

👉 **完整教程**：[插件基础](/5-advanced/12a-plugins-basics)

---

## 新功能：ACP 会话用量追踪

### 这次更新了什么？

ACP（Agent Communication Protocol）现在支持会话级别的用量追踪。

### 有什么用？

如果你通过 IDE 扩展（如 VS Code）使用 OpenCode，现在可以看到每个会话的 token 用量统计。

👉 **完整教程**：[ACP 协议](/5-advanced/08b-acp)

---

## 改进：插件加载顺序

### 这次更新了什么？

用户插件现在在内置插件之后加载，确保���户插件可以正确覆盖内置行为。

---

## 问题修复：中止消息时的未处理错误

### 之前的问题

当有排队消息时中止操作，可能会触发未处理的错误。

### 现在的情况

中止操作现在能正确处理排队消息，不再出现未处理错误。

---

## 改进：桌面端

### 文件外部打开

新增按钮，可以在外部应用程序中打开文件。

### 提示词输入改进

关闭评论按钮在提示词输入框中现在可见。当有权限请求或问题时，提示词输入框会自动隐藏。

### 文件树折叠

文件树现在可以独立折叠，不影响其他面板。

### 修改文件颜色对比度

修改文件的颜色对比度提高，更容易辨识。

---

## 改进：TUI

### 对话框鼠标退出

对话框中的 "esc" 标签现在支持鼠标点击退出，不再只能用键盘。

---

## 要不要升级？

| 情况 | 建议 |
|------|------|
| 使用自定义插件 | ✅ 推荐升级 |
| 通过 IDE 使用 OpenCode | ✅ 推荐升级 |
| 桌面端用户 | ✅ 推荐升级 |
| 用得好好的 | 可以等下次 |

**升级命令**：

```bash
opencode upgrade
```

---

## 技术细节（可跳过）

<details>
<summary>点击展开完整更新列表</summary>

### Core
- Load user plugins after built-in plugins
- Fix unhandled errors when aborting with queued messages
- User plugins override built-in plugins for the same provider (@rmk40)
- Move Codex 5.3 model definition to plugin to avoid showing unsupported model to other users
- Add session usage tracking to ACP (@SteffenDE)
- Update transforms for GPT-5.3

### TUI
- Allow mouse escape via "esc" labels in dialogs (@AksharP5)

### Desktop
- Make close comment button visible in prompt input (@alexyaroshuk)
- Hide prompt input when there are permissions requests or questions
- More terminal stability fixes
- Modified file color contrast in app for better visibility
- Add button to open files in external applications
- Allow toggling file tree closed independently
- Stop showing SessionSkeleton on new workspace (@dbpolito)
- Set workspace name earlier to improve creation and deletion (@dbpolito)

</details>

---

[← 返回更新日志](./index.md)
