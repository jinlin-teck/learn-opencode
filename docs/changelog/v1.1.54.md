# v1.1.54：Skill URL 发现、ACP 写文件更稳、模型报错更清晰

**发布日期**：2026年02月11日

---

## 一句话总结

这次更新把「大版本里最容易踩坑的地方」补齐了：Skill 能通过 URL 自动发现、ACP 写文件会自动创建新文件、模型选择错误会给明确事件和错误类型，桌面端与 TUI 也修掉了一批高频问题。

---

## 新功能：Skill 支持通过 URL 自动发现

### 这次更新了什么？

OpenCode 新增了基于 well-known RFC 的 Skill URL 发现能力，后续通过 URL 接入 Skill 更顺滑。

### 这对你有什么用？

以前你需要手动找 Skill 入口；现在可以直接从标准 URL 走发现流程，尤其适合团队统一分发 Skill。

### 如何使用？

👉 **完整教程**：[Skill 进阶](/5-advanced/03b-skills-advanced)

👉 **官方文档**：[Agents](https://opencode.ai/docs/agents)

**快速体验**：

1. 先确认你的 Skill 来源地址可公开访问。
2. 在项目里按已有 Skill 流程配置并触发加载。
3. 观察是否按 URL 自动发现并加载对应 Skill。

---

## 新功能：ACP 写文件时自动创建不存在的文件

### 这次更新了什么？

通过 ACP 通道写文件时，如果目标文件不存在，OpenCode 现在会自动创建文件再写入。

### 这对你有什么用？

你在 IDE + ACP 场景下执行写入操作，不再因为「文件还没建」直接失败，自动化脚本更稳定。

### 如何使用？

👉 **完整教程**：[ACP 协议](/5-advanced/08b-acp)

👉 **官方文档**：[ACP Support](https://opencode.ai/docs/acp)

**快速体验**：

1. 按教程启动 ACP（`opencode acp`）。
2. 让 Agent 向一个不存在的路径写入文件。
3. 确认文件被创建并写入成功。

---

## 新功能：模型选择错误事件与报错类型增强

### 这次更新了什么？

新增 `session.error` 事件用于无效模型选择；同时新增 `ContextOverflowError`，并改进模型变体可用性检查逻辑。

### 这对你有什么用？

排查模型问题时不再是「静默失败」或模糊报错，日志和事件会更快告诉你哪里错了。

### 如何使用？

👉 **完整教程**：[配置基础](/5-advanced/01a-config-basics)

👉 **延伸教程**：[思考深度配置](/5-advanced/21-thinking-depth)

👉 **官方文档**：[Models](https://opencode.ai/docs/models)

**快速体验**：

1. 在配置里故意填一个不存在的模型 ID。
2. 启动会话并观察事件或日志输出。
3. 改回可用模型，验证会话恢复正常。

---

## 问题修复：桌面端 / TUI / Core 多项稳定性修复

### 之前的问题

包括 Homebrew 升级偶发需要多次运行、应用内终端回放异常、工作区重置后行为不稳定等。

### 现在的情况

这些问题在 v1.1.54 中集中修复，桌面端、TUI 和核心流程稳定性明显提升。

---

## 要不要升级？

| 情况 | 建议 |
|------|------|
| 你在用 ACP 或 IDE 集成 | ✅ 建议立即升级 |
| 你经常切换模型/变体 | ✅ 建议立即升级 |
| 你主要用桌面端 | ✅ 建议升级 |
| 用得好好的 | 可以等下次 |

**升级命令**：

```bash
opencode upgrade
```

---

## 技术细节（可跳过）

<details>
<summary>点击展开完整更新列表</summary>

### Core（节选）
- Publish session.error event for invalid model selection
- Create file if it doesn't exist when writing via ACP
- Add new ContextOverflowError type
- Add skill discovery from URLs via well-known RFC
- Parse mid-stream OpenAI response errors to prevent infinite retries
- Resolve Homebrew upgrade requiring multiple runs

### TUI（节选）
- Use sender color for queued messages in TUI
- Add --fork flag to duplicate sessions before continuing
- Improve skills dialog readability

### Desktop（节选）
- Fix terminal replay issues in app
- Fix workspace reset and session navigation issues
- Improve prompt input, sidebar, and file tree interactions
- Add native Wayland toggle and more menu bar capabilities

官方 Release Notes：
- https://github.com/anomalyco/opencode/releases/tag/v1.1.54

</details>

---

[← 返回更新日志](./index.md)
