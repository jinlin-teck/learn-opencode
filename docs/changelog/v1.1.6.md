# v1.1.6：主题系统 + 桌面版大更新

**发布日期**：2026年1月7日

---

## 一句话总结

这次更新带来了**主题系统**，可以自定义界面配色，桌面版也有大量改进。

---

## 新功能：主题系统

### 这次更新了什么？

OpenCode 现在支持**自定义主题**了！你可以：

- 选择内置主题
- 创建自己的配色方案
- 主题会跟随系统深色/浅色模式自动切换

### 如何使用？

👉 **完整教程**：[主题系统](/5-advanced/06a-themes)

**快速切换主题**：

1. 按 `Ctrl+P` 打开命令面板
2. 输入 `theme`
3. 选择喜欢的主题

---

## 新功能：隐藏子代理

### 这次更新了什么？

你现在可以**隐藏特定的子代理**，让它们不出现在主代理的系统提示词中。

### 使用场景

如果你有一些专用的子代理（比如只在特定项目使用），可以把它们隐藏起来，避免干扰主代理的决策。

### 如何配置？

在 Agent 配置中添加 `hidden: true`：

```json
{
  "agents": {
    "my-special-agent": {
      "hidden": true,
      "...": "..."
    }
  }
}
```

---

## 桌面版：大量改进

| 改进 | 说明 |
|------|------|
| 粘贴图片修复 | 输入框为空时也能粘贴图片了 |
| 媒体框架内置 | 不再依赖系统媒体库 |
| 摄像头/麦克风权限 | 支持需要这些权限的 MCP 工具 |
| 窗口立即显示 | 启动时不再白屏等待 |
| 终端选中文字更清晰 | 提高了对比度 |

---

## 改进：非 ASCII 路径支持

### 之前的问题

如果你的项目路径包含中文或其他非 ASCII 字符，可能会遇到问题。

### 现在的情况

非 ASCII 路径现在会正确编码，中文路径可以正常使用了。

---

## 改进：工具输出截断

### 这次更新了什么？

所有工具的输出现在都有**截断机制**，避免超长输出占用过多上下文。

被截断的内容会保存到文件，需要时可以查看完整内容。

---

## 要不要升级？

| 情况 | 建议 |
|------|------|
| 想换个界面配色 | ✅ 升级 |
| 使用桌面版 | ✅ 升级 |
| 项目路径有中文 | ✅ 升级 |
| 用得好好的 | 可以等下次 |

**升级命令**：

```bash
opencode upgrade
```

---

## 技术细节（可跳过）

<details>
<summary>点击展开完整更新列表</summary>

### Core（核心）

- 非 ASCII 目录路径在 HTTP 头中正确编码（@jwaterwater）
- 所有工具添加输出截断
- General 子代理在代理列表中可见（@dbpolito）
- 改进不可序列化错误的处理
- 添加隐藏子代理功能（@Sewer56）
- 添加 --use-system-ca 标志支持系统证书
- 确保列出子代理的命令正常工作

### TUI（终端界面）

- 添加主题功能
- 配置变更时重新加载主题
- 清除调色板缓存
- 内联 Task 工具添加代理颜色和高亮代理名称（@spoons-and-mirrors）
- PowerShell 中转义反引号（@NSPC911）
- 恢复 TUI 中附加会话查找行为（@rmk40）

### Desktop（桌面版）

- 修复输入框为空时粘贴图片的问题（@dbpolito）
- 内置媒体框架（@Brendonovich）
- 修复 macOS 应用权限配置（@Brendonovich）
- 添加音频输入和摄像头权限（@saeedvaziry）
- AppImage 内置媒体框架（@Brendonovich）
- 使用 Show 替代 Suspense（@Brendonovich）
- 添加 UI 包（@Brendonovich）
- 启动时立即显示窗口（@usvimal）
- 重构存储方案
- 修复键盘快捷键会话导航
- 权限自动接受在不需要时隐藏
- 提高终端文字选中对比度

### 社区贡献

感谢 11 位社区贡献者！

</details>

---

[← 返回更新日志](./index.md)
