# v1.1.57：桌面端大优化

**发布日期**：2026年2月11日

---

## 一句话总结

这次更新 **大幅优化桌面应用体验**，修复终端复制粘贴、Windows 适配、Wayland 支持等问题，同时改进了上下文压缩的可靠性。

---

## 新功能：WSL 后端模式

### 这次更新了什么？

桌面版 OpenCode 现在支持 **WSL 后端模式**，可以在 Windows 上通过 WSL 运行 OpenCode，获得更好的兼容性。

### WSL 后端模式是什么？

如果你在 Windows 上使用 WSL（Windows Subsystem for Linux），可以让桌面版 OpenCode 在 WSL 环境中运行，而不是直接在 Windows 上运行。

### 好处是什么？

- 更好的 Linux 工具链兼容性
- 文件系统行为与 Linux 一致
- 避免一些 Windows 特有的问题

---

## 改进：上下文压缩更可靠

### 之前的问题

在长对话中，OpenCode 会自动压缩上下文以节省 token。但有时压缩不够可靠，可能导致信息丢失。

### 现在的情况

- 增加了预留 token 缓冲区，为输入窗口压缩留出足够空间
- 添加了更多上下文溢出的处理场景
- 移除了过度纠正的情况

---

## 改进：TUI 侧边栏默认自动

### 变化

TUI（终端界面）的会话侧边栏现在默认为「自动」模式，根据终端宽度自动显示或隐藏。

---

## 问题修复：桌面端多项改进

### 终端复制粘贴

之前桌面应用的终端复制粘贴功能有问题，现在已修复。

### Windows 应用适配

- 改善了 Windows 上的应用分辨率检测
- 优化了 UI 加载状态
- 修复了复制路径按钮样式

### Wayland 支持

桌面应用现在会从配置中读取 Wayland 偏好设置，更好地支持 Linux Wayland 显示服务器。

---

## 要不要升级？

| 情况 | 建议 |
|------|------|
| 使用桌面版 | ✅ 升级 |
| Windows 用户 | ✅ 强烈推荐 |
| 只用终端版 | 可以等下次 |

**升级命令**：

```bash
opencode upgrade
```

---

## 技术细节（可跳过）

<details>
<summary>点击展开完整更新列表</summary>

### Core（核心）

- 添加更多上下文溢出处理场景，移除过度纠正
- 确保压缩更可靠，增加预留 token 缓冲区
- 改进 /review 提示词，更明确地检测行为变化
- 改进 Amazon Bedrock 检查，支持容器凭证

### TUI（终端界面）

- 会话侧边栏默认为自动模式

### Desktop（桌面应用）

- 修复终端复制粘贴功能
- 修复复制路径按钮样式
- 使用 tracing 进行日志记录
- 增强 Windows 应用分辨率和 UI 加载状态
- 改进桌面应用服务器启动弹性
- 从配置中读取 Wayland 偏好
- 添加 WSL 后端模式

### SDK

- 在 v1 SDK HTTP 头中编码非 ASCII 目录路径

### 社区贡献

- @OpeOginni：改进 Amazon Bedrock 检查支持容器凭证
- @Brendonovich：添加 WSL 后端模式、Wayland 偏好、tracing 日志
- @neriousy：增强 Windows 应用分辨率和 UI 加载状态
- @MrMushrooooom：修复非 ASCII 目录路径编码
- @ariane-emory：移除迁移到 1.0 文档

</details>

---

[← 返回更新日志](./index.md)
